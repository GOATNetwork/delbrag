<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="goat-delbrag-introduction"><a class="header" href="#goat-delbrag-introduction">GOAT Delbrag Introduction</a></h1>
<p><a href="https://rubin.io/public/pdfs/delbrag.pdf">Delbrag</a> uses Garbled Circuits (GCs) to enthance Bitcoin L2 solutions based on <a href="https://bitvm.org/bitvm2.html">BitVM2</a>, streamlining disputes through single-hash disprove transactions. This enables simpler, more accessible Bitcoin L2 scalability.</p>
<h2 id="garbled-circuits-gc-fundamentals"><a class="header" href="#garbled-circuits-gc-fundamentals">Garbled Circuits (GC) Fundamentals​</a></h2>
<p>Garbled Circuits are a cryptographic protocol enabling secure multi-party computation (MPC). They allow two parties (Garbler and Evaluator) to compute a function f(x, y) without revealing private inputs (x from Garbler, y from Evaluator).</p>
<h3 id="boolean-circuit-representation"><a class="header" href="#boolean-circuit-representation">​Boolean Circuit Representation​​</a></h3>
<p>Computations are represented as Boolean circuits (composed of logic gates, such as AND, XOR, NOT, OR). For example, a 2-bit adder computes Out = In0 + In1 using 7 gates (little-endian: In0 = (in00,in01), In1 = (in10,in11) and Out = (out0, out1, out2)) : <img src="2bit_add.png" alt="2bit-add" />
G0: out0 = in00 ^ in10,
G1: m0 = in00 &amp; in10,<br />
G2: m1 = in01 ^ in11,<br />
G3: m2 = in01 &amp; in11,
G4: out1 = m0 ^ m1,<br />
G5: m3 = m0 &amp; m1,<br />
G6: out2 = m2 | m3.<br />
​</p>
<h3 id="garbling-process-garblers-role"><a class="header" href="#garbling-process-garblers-role">​Garbling Process (Garbler's Role)​​:</a></h3>
<p>Garbler generates two 256-bit labels (X, Y) per wire (e.g., X(in00) and Y(in00) indicate in00 = 0 and in00=1 respectively).</p>
<p>After expressing each wire as random labels, Garbler then encrypt gate outputs using cryptographic hashes. For XOR gate G0, four gate outputs Enc0, Enc1, Enc2, Enc3 are calculated using the truth value table of XOR: (0,0)-&gt;0; (0,1)-&gt;1; (1,0)-&gt;1; (1,1)-&gt;0.</p>
<ul>
<li>Enc0 = X(out0) \oplus H(X(in00) || X(in10)),</li>
<li>Enc1: Y(out0) \oplus H(X(in00) || Y(in10)),</li>
<li>Enc2: Y(out0) \oplus H(Y(in00) || X(in10)),</li>
<li>Enc3: X(out0) \oplus H(Y(in00) || Y(in10)).
​</li>
</ul>
<h3 id="evaluation-evaluators-role"><a class="header" href="#evaluation-evaluators-role">​Evaluation (Evaluator's Role)​​:</a></h3>
<p>Garbler transmits shuffled encrypted gate outputs and input labels. Evaluator receives labels:</p>
<ul>
<li>Garbler's inputs: Directly provided.</li>
<li>Evaluator's inputs: Obtained via ​​Oblivious Transfer (OT, a cryptography tool which makes sure Evaluator receive no other labels and Garbler know no nothing about used labels corresponding to valuator's inputs)​​.
Then，</li>
</ul>
<p>Evaluator decrypts gates sequentially using received labels and final output labels are sent to Garbler for plaintext conversion.</p>
<h2 id="delbrag-gc-for-bitcoin-l2"><a class="header" href="#delbrag-gc-for-bitcoin-l2">​​Delbrag: GC for Bitcoin L2​​</a></h2>
<p>Delbrag optimizes BitVM2’s withdrawal validation by replacing ZKP verification with GCs. Key advantages:</p>
<ul>
<li>Commitment Efficiency​​: Only input/output labels are committed on-chain (e.g., H(X(in00)), H(Y(out))).</li>
<li>​​Dispute Simplification​​: Validity checks require only label consistency proofs via Bitcoin’s native opcode.</li>
</ul>
<p>While the specifics of the Delbrag scheme remain subject to public discussion and refinement, we proceed to detail the GOAT Delbrag implementation.</p>
<h2 id="goat-delbrag"><a class="header" href="#goat-delbrag">GOAT Delbrag</a></h2>
<p>GOAT Delbrag extends GOAT BitVM2’s workflow ("Peg-in → Kickoff → Challenge → Assert → Disprove" in most complex casse) while largely reducing Bitcoin transaction complexity.</p>
<h3 id="goat-delbrag-workflow-overview"><a class="header" href="#goat-delbrag-workflow-overview">GOAT Delbrag Workflow Overview​​</a></h3>
<p>GOAT Network publicly endorses a ​​Boolean circuit-based ZKP verification algorithm​​ for validating withdrawal integrity on Bitcoin, coupled with its ​​garbled circuit (GC) ZKP framework​​ that cryptographically attests to the correct construction of the GC corresponding to the defined Boolean circuit.</p>
<ul>
<li>
<p>​Phase 1: Peg-in</p>
<p>Offline/L2 actions exhibit greater complexity compared to GOAT BitVM2:</p>
<ul>
<li>Operator genenrates the garbled circuit for ZKP verification Boolean circuit and publishes all encrypted gate outputs.</li>
<li>Operator generates a ​​ZK proof attesting to the garbled circuit's construction correctness (label consistency and encryption validity).</li>
<li>L2 veiriy the validity of the garble circuit‘s construction and then mint L2 assets.</li>
</ul>
<p>​Actions on Bitcoin​​:</p>
<ul>
<li>Input label commitment​​: Commit to input wire labels (e.g., publish H(X(in00)), H(Y(in00)) via Taproot locking scripts).</li>
<li>Output label commitment: Commit to output wire labels (output is 0 for invalid and 1 for valid in varification algorithm, publish H(X(out)), H(Y(out))).</li>
<li>​Error penalty via Taproot Tree​​​​: Invalid input label disclosure or incorrect output label revelation will trigger penalty execution (i.e., disprove transaction).</li>
</ul>
</li>
<li>
<p>​Phase 2: Kickoff</p>
<ul>
<li>Operator submits plaintext ZK proof (including valid L2 state).</li>
</ul>
</li>
<li>
<p>​​Phase 3: Challenge
​The Challenger initiates a challenge when offline verification confirms the submitted proof is invalid.</p>
</li>
<li>
<p>Phase 4: Assert
Operator reveals all input labels on Bitcoin network under challenge.</p>
</li>
<li>
<p>Phase 5: Disprove
The Challenger triggers penalty mechanisms upon detecting protocol vialations:</p>
<ul>
<li>​Input label inconsistency​​ with committed values during the Peg-in process or with plaintext proof,</li>
<li>​​Invalid final output​​ (0 returned where verification requires 1).</li>
</ul>
</li>
</ul>
<h3 id="key-benefits-and-future-optimization-directions"><a class="header" href="#key-benefits-and-future-optimization-directions">Key Benefits and Future Optimization Directions​​</a></h3>
<p>Compared to GOAT BitVM2, ​​GOAT Delbrag substantially enhance on-chain efficiency through reduction on-chain operations​​:</p>
<ul>
<li>​​Minimized commitment data​​ (input/output labels for ZKP proof garble circuit),</li>
<li>​Simplified dispute resolution​​ (single-step disprove transaction after Operator reveals input labels).</li>
</ul>
<p>However, it also introduces ​​increased off-chain overhead​​ due to:</p>
<ul>
<li>High-volume garbled circuit gate ciphertexts,</li>
<li>Time-intensive ZK proofs for garnble circuit construction validity.
Thus, ​​reducing offline data volume​​ and ​​accelerating proof computation​​ remain key optimization priorities for GOAT Delbrag.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
